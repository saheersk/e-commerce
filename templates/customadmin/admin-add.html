{% extends "customadmin/admin-base.html" %} {% block content %} {% load static %}
<main id="main-wrapper" class="main-wrapper">
    {% include 'customadmin/includes/admin-header.html' %} {% include 'customadmin/includes/sidebar.html' %}
    <!-- Page Content -->
    <div id="app-content">
        <!-- Container fluid -->
        <div class="app-content-area">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-12">
                        <!-- Page header -->
                        <div class="mb-5">
                            <h3 class="mb-0">Add {{user_tag}}</h3>
                        </div>
                    </div>
                </div>
                <div>
                    <!-- row -->
                    <div class="row">
                        <div class="input-container col-lg-12 col-12">
                            <form class="input-form d-block dropzone border-dashed rounded-2" action="" method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                {{form.as_p}}
                                <button type="submit" class="btn btn-primary">submit</button>
                            </form>
                            {% if error %}
                                <p class="error-message">{{message}}</p>
                            {% endif %} 
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}
{% comment %} 
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="button" id="add-image-input">Add Image</button>
    <input type="submit" value="Upload">
</form>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const addImageInputButton = document.getElementById("add-image-input");
    const form = document.querySelector("form");

    addImageInputButton.addEventListener("click", function() {
        const newInput = document.createElement("input");
        newInput.type = "file";
        newInput.name = "images";
        newInput.accept = "image/*";
        newInput.multiple = true;

        form.insertBefore(newInput, addImageInputButton);
    });
});
</script> {% endcomment %}
{% comment %} 
from django.shortcuts import render
from .forms import ImageUploadForm

def upload_images(request):
    if request.method == 'POST':
        form = ImageUploadForm(request.POST, request.FILES)
        if form.is_valid():
            # Handle the uploaded images here
            images = request.FILES.getlist('images')
            for image in images:
                # Process each image as needed (e.g., save it to the database or file system)
                pass
            return render(request, 'success.html')
    else:
        form = ImageUploadForm()

    return render(request, 'upload.html', {'form': form}) {% endcomment %}
